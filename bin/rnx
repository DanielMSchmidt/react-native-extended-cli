#!/bin/bash
script=$1
shift

rnxRoot=${BASH_SOURCE[0]%/*}/../react-native-extended-cli

if [ ! -d "$rnxRoot" ]; then
    rnxRoot=${BASH_SOURCE[0]%/*}/../lib/node_modules/react-native-extended-cli
fi
export rnxRoot

PATH=$PATH:./node_modules/.bin:$rnxRoot/node_modules/.bin
export PATH


node ${rnxRoot}/bin/update-notifier.js

if [ -z "$script" ]; then
    echo "======================="
    echo "Welcome to rnx, the React Native Extended CLI!"
    echo "You didn't specify a command, so I'll exit now."
    echo "======================="
    exit
fi

scriptPath=${rnxRoot}/scripts/$script.sh

if [ -f $scriptPath ]; then
    sh $scriptPath $@
else
    react-native $script $@
fi
